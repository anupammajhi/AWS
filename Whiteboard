#!/bin/bash

# Get a list of all resource types
resource_types=$(aws resourcegroupstaggingapi get-resources --output json | jq -r '.ResourceTagMappingList[].ResourceType' | sort | uniq)

# Loop through each resource type and list resources
for resource_type in $resource_types
do
    echo "Resources of type: $resource_type"
    aws resourcegroupstaggingapi get-resources --resource-type-filters $resource_type --output table
    echo "-----------------------------"
done